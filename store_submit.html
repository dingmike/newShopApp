<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商家入驻3</title>
    <meta name="renderer" content="webkit">
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection"/>
	<meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE,Chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <link rel="stylesheet" href="css/merchant_entry.css">
    <link rel="stylesheet" href="css/LArea.min.css">
    <script src="js/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="js/default.js"></script>
    <script src="js/LArea.js"></script>
    <script src="js/regionData.js"></script>
  
    <style>
        body {overflow-x: hidden}
        .content1 {
            -webkit-box-flex: 1;
            overflow: auto;
            overflow-y: hidden;
        }
        *{
            -webkit-overflow-scrolling: touch;
        }
		.upload_div1{
			position: relative;
		}
		.upload_div2{
			position: relative;
		}
		.upload_div1 input{
			position: absolute;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			margin: auto;
			width: 68px;
			opacity: 0;
		}
		.upload_div2 input{
			position: absolute;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			margin: auto;
			width: 68px;
			opacity: 0;
		}
	</style>
</head>
<body>
<!--head-->
<div class="head">
    <img src="img/merchant_entry/arrow.png" onclick="history.go(-1)">
    商家入驻
    <span>
        重新入驻填写
    </span>
</div>
<div class="content1">
    <!--picture-->
    <div class="picture">
        <img src="img/merchant_entry/background.png" class="picture_background">
        <img src="img/merchant_entry/stepsbar3.png" class="stepsbar">
    </div>

    <div class="choice">
    <span class="span1 span_public">
        公司
    </span>
        <span class="span2 ">
       个人
   </span>
    </div>

    <!--company-->
    <div class="gsmeg">

        <div class="input_submit">
            <input class="input2 company1" type="text" placeholder="公司名称 "/>
            <input class="input2 phone" type="text" placeholder="联系电话 "/>
            <div class=" input2 ">
                <input  type="text" class="input_box-input  input_box-input1 demo1"  readonly="" placeholder="公司地址（省，市，区）"  value="公司地址（省，市，区）"/>
                <input   class="input_box-input2 value1 address" type="hidden" value=""/>
            </div>
            <input class="input2 descAddress" type="text" placeholder="详细地址 "/>
            <input class="input2 uniformCreditCode" type="text" placeholder="统一信用代码 "/>
            <input class="input2 legalRepresentative" type="text" placeholder="法人代表 "/>
            <input class="input2 idCard" type="text" placeholder="身份证号"/>
        </div >


        <div class="input_submit input_submit2">
            <input class="input2 bankName" type="text" placeholder="开户银行 "/>
            <input class="input2 branchBankName" type="text" placeholder="开户支行"/>
            <input class="input2 accountHolder" type="text" placeholder="开户人 "/>
            <input class="input2 bankAccount" type="text" placeholder="开户账号"/>
            <span>
        *请准确填写，信息不对建影响货款收入
    </span>
        </div>

        <div class="upload">
            <div class="upload_div1 yyzz">
                <img src="img/merchant_entry/upload.png">
                营业执照

            </div>


            <div class="upload_div2 yjk">
                <img src="img/merchant_entry/upload.png">
                印鉴卡

            </div>
            <div class="upload_div1 frsfz_zm">
                <img src="img/merchant_entry/upload.png">
                法人身份张正面

            </div>
            <div class="upload_div2 frsfz_fm">
                <img src="img/merchant_entry/upload.png">
                法人身份证反面

            </div>
        </div>
        <div class="button button_submit">
            下一步
        </div>

    </div>

    <!--personal-->
    <div class="personal">
        <div class="input_submit">
            <input class="input2 company2" type="text" placeholder="姓名 "/>
            <input class="input2 phone1" type="text" placeholder="联系电话 "/>
            <div class=" input2 ">
                <input type="text" class="input_box-input input_box-input1 demo2"  readonly="" placeholder="通讯地址（省，市，区）"  value=""/>
                <!--<input id="regAddressId" type="text" class="input_box-input demo" readonly="" placeholder=" 注册地址" value=""/>-->
                <input  class="input_box-input2" type="hidden" value=""/>
            </div>
            <input class="input2 descAddress1" type="text" placeholder="详细地址 "/>
            <input class="input2 idCard1" type="text" placeholder="身份证号"/>
        </div >

        <div class="input_submit input_submit2">
            <input class="input2 bankName1" type="text" placeholder="开户银行 "/>
            <input class="input2 branchBankName1" type="text" placeholder="开户支行"/>
            <input class="input2 accountHolder1" type="text" placeholder="开户人 "/>
            <input class="input2 bankAccount1" type="text" placeholder="开户账号"/>
            <span>
        *请准确填写，信息不对建影响货款收入
    </span>
        </div>
        <div class="upload">
            <div class="upload_div1 sqr_zm">
                <img src="img/merchant_entry/upload.png">
                申请人身份证正面
            </div>
            <div class="upload_div2 sqr_fm">
                <img src="img/merchant_entry/upload.png">
                申请人身份证反面
            </div>
        </div>

        <div class="button button_submit2">
            下一步
        </div>

    </div>

    <div class="prompt">
    <span class="prompt_span1">
       是否重新填写入驻资料？
    </span>
        <span class="submit_prompt_span1">
        取消
    </span>
        <a href="store_perfect.html" style='text-decoration:none;     -webkit-tap-highlight-color: rgba(255,0,0,0);'>
        <span class="submit_prompt_span2">
        	确定
        </span>
        </a>

    </div>
    <div class="background">

    </div>

</div>

<!--<script src="js/LAreaData2.js"></script>-->

</body>
<script>
	$(function(){
		var regShopAccount = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,12}$/;//6-12位数字加字母组成
		var regPass = /^\d{6,12}$/;//6-12位数字组成
		var regSf=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;//身份证号
		var regBank=/^([1-9]{1})(\d{14}|\d{18})$/;//银行卡号
		var myreg=/^[1][3,4,5,7,8][0-9]{9}$/; 

		//调用手机上传图片
		function upImg(obj){
			obj.click(function(){
				setupWebViewJavascriptBridge(function(bridge) {
					bridge.callHandler('loadPicture', {
						'type': 'Photo'
					}, function(resp) {
						setbaseImg(JSON.parse(resp), obj);
					});
				})
			});
		};
		
		function setbaseImg(resp, obj) {
			if(resp.ret_code === '1') {
				$.post(ajaxUrl + "/front/ordersComment/addImg", {
					imgStr: resp.ret_msg.data
				}, function(result) {
					if(result.code == 200) {
						obj.find('img').attr('src', result.ImgUrl);
						
					}else{
						tip.flag(result.msg, 'error');
					}
				});
			} else {
				tip.flag("图片选取失败", 'error');
			}
		}
		
		
		//个人注册
		upImg( $('.sqr_zm') );//个人身份证正面
		upImg( $('.sqr_fm') );//个人身份证反面
		
		
		//公司注册
		upImg( $('.yyzz') );//营业执照
		upImg( $('.yjk') );//印鉴卡
		upImg( $('.frsfz_zm') );//法人身份证正面
		upImg( $('.frsfz_fm') );//法人身份证反面


		//个人
		$('.button_submit2').click(function(){
			var company = $('.company2').val();
			var phone = $('.phone1').val();
			var address = $('.demo2').val();
			var descAddress = $('.descAddress1').val();
			var idCard = $('.idCard1').val();
			var bankName = $('.bankName1').val();
			var branchBankName = $('.branchBankName1').val();
			var accountHolder = $('.accountHolder1').val();
			var bankAccount = $('.bankAccount1').val();
			var facadeIdCard = $('.sqr_zm img').attr('src');
			var reverseIdCard = $('.sqr_fm img').attr('src');

			var data = {
				token:token,
				company:company,
				phone:phone,
				address:address,
				descAddress:descAddress,
				idCard:idCard,
				bankName:bankName,
				branchBankName:branchBankName,
				accountHolder:accountHolder,
				bankAccount:bankAccount,
				facadeIdCard :facadeIdCard ,
				reverseIdCard :reverseIdCard ,
				type:3
			};
			console.log(data)
			if(!company){
				tip.flag('请填写姓名','error');
			}else if(!phone){
				tip.flag('请填写电话号码','error');
			}else if( !myreg.test(phone) ){
				tip.flag('电话号码格式错误','error');
			}else if(!address){
				tip.flag('请选择地址','error');
			}else if(!descAddress){
				tip.flag('详细地址不能为空','error');
			}else if( !regSf.test(idCard)){
				tip.flag('身份证格式不正确','error');
			}else if(!bankName){
				tip.flag('开户银行不能为空','error');
			}else if(!branchBankName){
				tip.flag('开户支行不能为空','error');
			}else if(!accountHolder){
				tip.flag('开户人不能为空','error');
			}/*else if(!regBank.test(bankAccount)){
				tip.flag('卡号格式错误','error');
			}*/ /* else if(!facadeIdCard){
				tip.flag('请上传身份证正面照','error');
			}else *//*if(!reverseIdCard){
				tip.flag('请上传身份证反面照','error');
			}*/else{
				$.ajax({
					type:"post",
					url:ajaxUrl+"/front/shop/applyThree",
					data:data,
					success:function(r){
						window.location.href='store_inspect.html';
					}
				});
			}
		})
		
		
		//公司
		$('.button_submit').click(function(){
			var company = $('.company1').val();
			var phone = $('.phone').val();
			var address = $('.address').val();
			var descAddress = $('.descAddress').val();
			var idCard = $('.idCard').val();
			var uniformCreditCode = $('.uniformCreditCode').val();
			var legalRepresentative = $('.legalRepresentative').val();
			var bankName = $('.bankName').val();
			var branchBankName = $('.branchBankName').val();
			var accountHolder = $('.accountHolder').val();
			var bankAccount = $('.bankAccount').val();
			var businessLicense = $('.yyzz img').attr('src');
			var sealCard = $('.yjk img').attr('src');
			var facadeIdCard = $('.frsfz_zm img').attr('src');
			var reverseIdCard = $('.frsfz_fm img').attr('src');
			var data = {
				token:token,
				company:company,
				phone:phone,
				address:address,
				descAddress:descAddress,
				idCard:idCard,
				uniformCreditCode:uniformCreditCode,
				legalRepresentative:legalRepresentative,
				bankName:bankName,
				branchBankName:branchBankName,
				accountHolder:accountHolder,
				bankAccount:bankAccount,
				businessLicense:businessLicense,
				sealCard :sealCard,
				facadeIdCard :facadeIdCard ,
				reverseIdCard :reverseIdCard ,
				type:2
			};
			
			if(!company){
				tip.flag('请填写公司名字','error');
			}else if(!phone){
				tip.flag('请填写电话号码','error');
			}else if( !myreg.test(phone) ){
				tip.flag('电话号码格式错误','error');
			}else if(!address){
				tip.flag('请选择地址','error');
			}else if(!descAddress){
				tip.flag('详细地址不能为空','error');
			}else if(!uniformCreditCode){
				tip.flag('信用代码不能为空','error');
			}else if(!legalRepresentative){
				tip.flag('法人代表不能为空','error');
			}else if( !regSf.test(idCard)){
				tip.flag('身份证格式不正确','error');
			}else if(!bankName){
				tip.flag('开户银行不能为空','error');
			}else if(!branchBankName){
				tip.flag('开户支行不能为空','error');
			}else if(!accountHolder){
				tip.flag('开户人不能为空','error');
			}else /*if(!regBank.test(bankAccount)){
				tip.flag('卡号格式错误','error');
			}else*/ if(!businessLicense){
				tip.flag('请上传营业执照','error');
			}else if(!sealCard){
				tip.flag('请上传印鉴卡','error');
			}/*else if(!facadeIdCard){
				tip.flag('请上传法人身份证正面照','error');
			}else if(!reverseIdCard){
				tip.flag('请上传法人身份证反面照','error');
			}*/else{
				$.post(ajaxUrl+'/front/shop/applyThree',data,function(r){
					if(r.code==300){
						tip.flag(r.msg,'error');
					}else{
						window.location.href='store_inspect.html';
					}
				},'json');
			}
		});
	});





    $(".submit_prompt_span1").click(function(){
        $(".submit_prompt_span1").css("color","#FF5E3F");
        $(".submit_prompt_span2").css("color","#7D7D7D");
        $(".prompt").css("display","none");
        $(".background").css("display","none");
    })
    $(".submit_prompt_span2").click(function(){
        $(".submit_prompt_span2").css("color","#FF5E3F");
        $(".submit_prompt_span1").css("color","#7D7D7D");

    })


    $(".head span").click(function(){
        $(".prompt").css("display","block");
        $(".background").css("display","block");
        $(".submit_prompt_span1").css("color","#7D7D7D");
    })

    $(".prompt_span2").click(function(){
        $(".prompt").css("display","none");
        $(".background").css("display","none");
    })

$(".span1").click( function (){
    $(".span1").addClass("span_public");
    $(".span2").removeClass("span_public");
    $(".gsmeg").css("display","block");
    $(".personal").css("display","none");
})

$(".span2").click(function(){
    $(".span2").addClass("span_public");
    $(".span1").removeClass("span_public");
    $(".gsmeg").css("display","none");
    $(".personal").css("display","block");
})

//----------------------------------
var area1 = new LArea();
area1.init({
    'trigger': '.demo1', //触发选择控件的文本框，同时选择完毕后name属性输出到该位置
    'valueTo': '.value1', //选择完毕后id属性输出到该位置
    'keys': {
        code: 'code',
        name: 'name'
    }, //绑定数据源相关字段 id对应valueTo的value属性输出 name对应trigger的value属性输出
    'type': 1, //数据源类型
    'data': LAreaData //数据源
});
area1.value=[1,13,3];//控制初始位置，注意：该方法并不会影响到input的value
var area2 = new LArea();
area2.init({
    'trigger': '.demo2',
    'valueTo': '.value2',
    'keys': {
        code: 'code',
        name: 'name'
    },
    'type': 1,
    'data': LAreaData
});
</script>

</html>